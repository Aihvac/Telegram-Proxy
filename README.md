# MTG Proxy Server - Auto Install Script

ุงู ุงุณฺฉุฑูพุช ฺฉ ูุตุจ ฺฉููุฏู ุฎูุฏฺฉุงุฑ ุจุฑุง MTG (MTProto Proxy) ูโุจุงุดุฏ ฺฉู ุจู ุดูุง ุงูฺฉุงู ุฑุงูโุงูุฏุงุฒ ุณุฑุน ู ุขุณุงู ฺฉ ูพุฑูฺฉุณ ุชูฺฏุฑุงู ุฑุง ูุฑุงูู ูโฺฉูุฏ.

## ๐ ูุตุจ ุณุฑุน

ุจุฑุง ูุตุจ ู ุฑุงูโุงูุฏุงุฒ MTG ูพุฑูฺฉุณ ฺฉุงู ุงุณุช ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```bash
curl -fsSL https://raw.githubusercontent.com/Aihvac/Telegram-Proxy/refs/heads/main/mtg.sh | bash
```

## ๐ ูพุดโูุงุฒูุง

- ุณุณุชู ุนุงูู Ubuntu/Debian
- ุฏุณุชุฑุณ sudo
- ุงุชุตุงู ุจู ุงูุชุฑูุช
- ูพูุฑุช 3128 ุจุงุฏ ุขุฒุงุฏ ุจุงุดุฏ

> **ูฺฉุชู**: ุงุณฺฉุฑูพุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุชูุงู ูุงุจุณุชฺฏโูุง ุดุงูู Goุ Git ู jq ุฑุง ูุตุจ ูโฺฉูุฏ.

## โ๏ธ ูพฺฉุฑุจูุฏ

### ุชูุธูุงุช ูพุดโูุฑุถ

- **ูพูุฑุช**: 3128
- **ุฏุงููู**: www.radmancarpet.ir
- **IP Bind**: 0.0.0.0 (ุชูุงู ุงูุชุฑูุณโูุง)

### ุชุบุฑ ุฏุงููู

ุจุฑุง ุชุบุฑ ุฏุงูููุ ูุชุบุฑ `DOMAIN` ุฑุง ุฏุฑ ูุงู ุงุณฺฉุฑูพุช ูุฑุงุด ฺฉูุฏ:

```bash
DOMAIN="your-domain.com"
```

## ๐ง ุนููฺฉุฑุฏ ุงุณฺฉุฑูพุช

ุงู ุงุณฺฉุฑูพุช ูุฑุงุญู ุฒุฑ ุฑุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงูุฌุงู ูโุฏูุฏ:

1. **ูุตุจ ูุงุจุณุชฺฏโูุง**: Goุ Git ู ุงุจุฒุงุฑูุง ููุฑุฏ ูุงุฒ
2. **ุฏุงูููุฏ ู ฺฉุงููพุงู**: MTG ุงุฒ ูุฎุฒู ุงุตู
3. **ุชููุฏ ุฑูุฒ**: ุงุฌุงุฏ ุฑูุฒ MTProto ุจุง ุฏุงููู ูุดุฎุต ุดุฏู
4. **ูพฺฉุฑุจูุฏ**: ุงุฌุงุฏ ูุงู ุชูุธูุงุช `/etc/mtg.toml`
5. **ุณุฑูุณ ุณุณุชู**: ุงุฌุงุฏ ู ูุนุงูโุณุงุฒ ุณุฑูุณ systemd
6. **ููุงุด ููฺฉโูุง**: ุงุฑุงุฆู ููฺฉโูุง ูพุฑูฺฉุณ IPv4 ู IPv6

## ๐ฑ ุงุณุชูุงุฏู

ูพุณ ุงุฒ ุงุฌุฑุง ููููุชโุขูุฒ ุงุณฺฉุฑูพุชุ ุฏู ููฺฉ ูพุฑูฺฉุณ ุฏุฑุงูุช ุฎูุงูุฏ ฺฉุฑุฏ:

- **IPv4**: `tg://proxy?port=3128&secret=...&server=YOUR_IPV4`
- **IPv6**: `tg://proxy?port=3128&secret=...&server=YOUR_IPV6`

ุงู ููฺฉโูุง ุฑุง ูโุชูุงูุฏ:
- ูุณุชููุงู ุฏุฑ ุชูฺฏุฑุงู ุจุงุฒ ฺฉูุฏ
- ุจุง ุฏูุณุชุงู ุฎูุฏ ุจู ุงุดุชุฑุงฺฉ ุจฺฏุฐุงุฑุฏ
- ุฏุฑ QR Code ุชุจุฏู ฺฉูุฏ

## ๐๏ธ ูุฏุฑุช ุณุฑูุณ

### ูุถุนุช ุณุฑูุณ
```bash
sudo systemctl status mtg
```

### ุชููู ุณุฑูุณ
```bash
sudo systemctl stop mtg
```

### ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ
```bash
sudo systemctl restart mtg
```

### ุบุฑูุนุงู ฺฉุฑุฏู ุณุฑูุณ
```bash
sudo systemctl disable mtg
```

## ๐ ูุงูโูุง ููู

- **ุชูุธูุงุช**: `/etc/mtg.toml`
- **ุณุฑูุณ**: `/etc/systemd/system/mtg.service`
- **ุจุงูุฑ**: `/usr/local/bin/mtg`

## ๐ ุนุจโุงุจ

### ุจุฑุฑุณ ูุงฺฏโูุง
```bash
sudo journalctl -u mtg -f
```

### ุจุฑุฑุณ ูพูุฑุช
```bash
sudo netstat -tlnp | grep 3128
```

### ุชุณุช ุงุชุตุงู
```bash
telnet localhost 3128
```

## ๐ ุงููุช

- ุณุฑูุณ ุจุง ฺฉุงุฑุจุฑ ูุญุฏูุฏ (`DynamicUser=true`) ุงุฌุฑุง ูโุดูุฏ
- ููุท ุฏุณุชุฑุณโูุง ูุงุฒู ุจู ุณุฑูุณ ุฏุงุฏู ูโุดูุฏ
- ุฑูุฒ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุชููุฏ ูโุดูุฏ

## ๐ ุฑูุน ูุดฺฉู

### ุฎุทุง "port already in use"
```bash
sudo lsof -i :3128
sudo kill -9 PID_NUMBER
```

### ุฎุทุง "permission denied"
```bash
sudo chmod +x /usr/local/bin/mtg
```

### ุชุฌุฏุฏ ุชููุฏ ุฑูุฒ
```bash
mtg generate-secret www.radmancarpet.ir
```

## ๐ค ูุดุงุฑฺฉุช

ุจุฑุง ฺฏุฒุงุฑุด ุจุงฺฏ ุง ูพุดููุงุฏุงุชุ ูุทูุงู Issue ุฌุฏุฏ ุฏุฑ GitHub ุงุฌุงุฏ ฺฉูุฏ.

## ๐ ูุฌูุฒ

ุงู ูพุฑูฺู ุชุญุช ูุฌูุฒ MIT ููุชุดุฑ ุดุฏู ุงุณุช.

## ๐ ููฺฉโูุง ููุฏ

- [MTG Repository](https://github.com/9seconds/mtg)
- [Telegram MTProto Proxy](https://core.telegram.org/mtproto)
- [Systemd Service Management](https://www.freedesktop.org/software/systemd/man/systemd.service.html)

---

**ุชูุณุนูโุฏููุฏู**: [Aihvac](https://github.com/Aihvac)

**ูุฎุฒู**: [Telegram-Proxy](https://github.com/Aihvac/Telegram-Proxy)

**ูุณุฎู**: 1.0.0
